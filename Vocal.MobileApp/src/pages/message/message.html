<ion-header>
  <ion-navbar hideBackButton="true">
    <ion-avatar start>
      <img src="https://scontent-cdg2-1.xx.fbcdn.net/v/t1.0-1/p24x24/16602600_10154441388394576_4490155536874187938_n.jpg?oh=21c11ffc32c0b439c7ee5b32629d6b97&oe=5A1910E7">
    </ion-avatar>
    <ion-title>
      {{VocalName}}
    </ion-title>
    <ion-buttons end>
      <button ion-button icon-only (click)="goToVocalList()"><ion-icon name="arrow-forward"></ion-icon></button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <ion-list>
    <ion-list-header>
      Conversation
    </ion-list-header>
    <ion-item-sliding *ngFor="let mess of Messages">
      <ion-item>
        <p *ngIf="mess.ContentType == 2">{{mess.Content}}</p>
        <p *ngIf="mess.ContentType == 1">
          <button ion-button icon-only *ngIf="mess.Content == null" (click)="getMessage(mess.Id)"><ion-icon name="download"></ion-icon></button>
          <audio controls [src]="domSanitizer.bypassSecurityTrustUrl(mess.Content)" *ngIf="mess.Content != null">
          </audio>
        </p>
      </ion-item>
      <ion-item-options side="right">
        <button ion-button icon-only><ion-icon name="closed-captioning"></ion-icon></button>
        <button ion-button icon-only><ion-icon name="share-alt"></ion-icon></button>
        <button ion-button icon-only><ion-icon name="download"></ion-icon></button>
        <button ion-button icon-only color="danger"><ion-icon name="trash"></ion-icon></button>
      </ion-item-options>
    </ion-item-sliding>
  </ion-list>
  <div id="chat-window" class="chat-window">
      <ion-grid>
        <ion-row id="message-room">

        </ion-row>
      </ion-grid>
  </div>

  <div>
    <form #form="ngForm" (ngSubmit)="sendMessage(form)" >
      <ion-grid>
        <ion-row>
          <ion-col col-10>
            <ion-item>
              <input type="hidden" ng-model="model.talkId" value="{{model.talkId}}" ng-init="model.talkId=model.talkId"/>
              <ion-input type="text" name="Message" [(ngModel)]="model.Message" placeholder="Say something..." required></ion-input>
            </ion-item>
          </ion-col>
          <ion-col col-2>
            <button ion-button icon-only round color="secondary" type="submit" [disabled]="!form.valid">
                <ion-icon name="arrow-round-up"></ion-icon>
            </button>
          </ion-col>
        </ion-row>
      </ion-grid>
    </form>
  </div>

</ion-content>
